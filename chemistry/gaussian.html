<!DOCTYPE html><html lang="en" class="no-js"><head><meta charset="utf-8"><meta name="viewport" content="width=device-width,initial-scale=1"><meta name="author" content="TalTech HPC Centre"><link rel="canonical" href="https://docs-dev.taltech.jamfox.dev/chemistry/gaussian.html"><link rel="icon" href="../assets/favicon.ico"><meta name="generator" content="mkdocs-1.6.1, mkdocs-material-9.5.38"><title>Gaussian - TalTech HPC User Guides</title><link rel="stylesheet" href="../assets/stylesheets/main.8c3ca2c6.min.css"><link rel="stylesheet" href="../assets/stylesheets/palette.06af60db.min.css"><link rel="preconnect" href="https://fonts.gstatic.com" crossorigin=""><link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Noto+Sans:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&amp;display=fallback"><style>:root{--md-text-font:"Noto Sans";--md-code-font:"Roboto Mono"}</style><link rel="stylesheet" href="../stylesheets/extra.css"><script>__md_scope=new URL("..",location),__md_hash=_=>[..._].reduce((e,t)=>(e<<5)-e+t.charCodeAt(0),0),__md_get=(_,e=localStorage,t=__md_scope)=>JSON.parse(e.getItem(t.pathname+"."+_)),__md_set=(_,e,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+_,JSON.stringify(e))}catch{}};
</script><link href="../assets/stylesheets/glightbox.min.css" rel="stylesheet"><style>html.glightbox-open{overflow:initial;height:100%}.gslide-title{-webkit-user-select:text;user-select:text;margin-top:0}.gslide-desc{color:#666;-webkit-user-select:text;user-select:text}.gslide-image img{background:#fff}.gscrollbar-fixer{padding-right:15px}.gdesc-inner{font-size:.75rem}body[data-md-color-scheme=slate] .gdesc-inner{background:var(--md-default-bg-color)}body[data-md-color-scheme=slate] .gslide-title,body[data-md-color-scheme=slate] .gslide-desc{color:var(--md-default-fg-color)}</style><script src="../assets/javascripts/glightbox.min.js"></script></head> <body dir="ltr" data-md-color-scheme="default" data-md-color-primary="custom" data-md-color-accent="custom"> <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off"> <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off"> <label class="md-overlay" for="__drawer"></label> <div data-md-component="skip"> <a href="#gaussian" class="md-skip"> Skip to content </a> </div> <div data-md-component="announce"> </div> <header class="md-header" data-md-component="header"> <nav class="md-grid md-header__inner" aria-label="Header"> <a href="../index.html" title="TalTech HPC User Guides" class="md-header__button md-logo" aria-label="TalTech HPC User Guides" data-md-component="logo"> <img src="../assets/favicon.ico" alt="logo" fetchpriority="high" decoding="async"> </a> <label class="md-icon md-header__button" for="__drawer"> <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3zm0 5h18v2H3zm0 5h18v2H3z"></path></svg> </label> <div class="md-header__title" data-md-component="header-title"> <div class="md-header__ellipsis"> <div class="md-header__topic"> <span class="md-ellipsis"> TalTech HPC User Guides </span> </div> <div class="md-header__topic" data-md-component="header-topic"> <span class="md-ellipsis"> Gaussian </span> </div> </div> </div> <form class="md-header__option" data-md-component="palette"> <input class="md-option" data-md-color-media="(prefers-color-scheme: light)" data-md-color-scheme="default" data-md-color-primary="custom" data-md-color-accent="custom" aria-label="Switch to dark mode" type="radio" name="__palette" id="__palette_0"> <label class="md-icon md-header__button" title="Switch to dark mode" for="__palette_1" hidden=""> <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 2a7 7 0 0 0-7 7c0 2.38 1.19 4.47 3 5.74V17a1 1 0 0 0 1 1h6a1 1 0 0 0 1-1v-2.26c1.81-1.27 3-3.36 3-5.74a7 7 0 0 0-7-7M9 21a1 1 0 0 0 1 1h4a1 1 0 0 0 1-1v-1H9z"></path></svg> </label> <input class="md-option" data-md-color-media="(prefers-color-scheme: dark)" data-md-color-scheme="slate" data-md-color-primary="custom" data-md-color-accent="custom" aria-label="Switch to light mode" type="radio" name="__palette" id="__palette_1"> <label class="md-icon md-header__button" title="Switch to light mode" for="__palette_0" hidden=""> <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 2a7 7 0 0 1 7 7c0 2.38-1.19 4.47-3 5.74V17a1 1 0 0 1-1 1H9a1 1 0 0 1-1-1v-2.26C6.19 13.47 5 11.38 5 9a7 7 0 0 1 7-7M9 21v-1h6v1a1 1 0 0 1-1 1h-4a1 1 0 0 1-1-1m3-17a5 5 0 0 0-5 5c0 2.05 1.23 3.81 3 4.58V16h4v-2.42c1.77-.77 3-2.53 3-4.58a5 5 0 0 0-5-5"></path></svg> </label> </form> <script>var palette=__md_get("__palette");if(palette&&palette.color){if("(prefers-color-scheme)"===palette.color.media){var media=matchMedia("(prefers-color-scheme: light)"),input=document.querySelector(media.matches?"[data-md-color-media='(prefers-color-scheme: light)']":"[data-md-color-media='(prefers-color-scheme: dark)']");palette.color.media=input.getAttribute("data-md-color-media"),palette.color.scheme=input.getAttribute("data-md-color-scheme"),palette.color.primary=input.getAttribute("data-md-color-primary"),palette.color.accent=input.getAttribute("data-md-color-accent")}for(var[key,value]of Object.entries(palette.color))document.body.setAttribute("data-md-color-"+key,value)}</script> <label class="md-icon md-header__button" for="__search"> <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"></path></svg> </label> <div class="md-search" data-md-component="search" role="dialog"> <label class="md-search__overlay" for="__search"></label> <div class="md-search__inner" role="search"> <form class="md-search__form" name="search"> <input type="text" class="md-search__input" name="query" aria-label="Search" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" required=""> <label class="md-icon md-search__icon" for="__search"> <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"></path></svg> <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11z"></path></svg> </label> <nav class="md-search__options" aria-label="Search"> <a href="javascript:void(0)" class="md-icon md-search__icon" title="Share" aria-label="Share" data-clipboard="" data-clipboard-text="" data-md-component="search-share" tabindex="-1"> <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M18 16.08c-.76 0-1.44.3-1.96.77L8.91 12.7c.05-.23.09-.46.09-.7s-.04-.47-.09-.7l7.05-4.11c.54.5 1.25.81 2.04.81a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3c0 .24.04.47.09.7L8.04 9.81C7.5 9.31 6.79 9 6 9a3 3 0 0 0-3 3 3 3 0 0 0 3 3c.79 0 1.5-.31 2.04-.81l7.12 4.15c-.05.21-.08.43-.08.66 0 1.61 1.31 2.91 2.92 2.91s2.92-1.3 2.92-2.91A2.92 2.92 0 0 0 18 16.08"></path></svg> </a> <button type="reset" class="md-icon md-search__icon" title="Clear" aria-label="Clear" tabindex="-1"> <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"></path></svg> </button> </nav> <div class="md-search__suggest" data-md-component="search-suggest"></div> </form> <div class="md-search__output"> <div class="md-search__scrollwrap" tabindex="0" data-md-scrollfix=""> <div class="md-search-result" data-md-component="search-result"> <div class="md-search-result__meta"> Initializing search </div> <ol class="md-search-result__list" role="presentation"></ol> </div> </div> </div> </div> </div> <div class="md-header__source"> <a href="https://github.com/TalTech-HPC-Centre/taltech-hpc-docs" title="Go to repository" class="md-source" data-md-component="source"> <div class="md-icon md-source__icon"> <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 496 512"><!-- Font Awesome Free 6.6.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2024 Fonticons, Inc.--><path d="M165.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6m-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3m44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9M244.8 8C106.1 8 0 113.3 0 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C428.2 457.8 496 362.9 496 252 496 113.3 383.5 8 244.8 8M97.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1m-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7m32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1m-11.4-14.7c-1.6 1-1.6 3.6 0 5.9s4.3 3.3 5.6 2.3c1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2"></path></svg> </div> <div class="md-source__repository"> github.com/TalTech-HPC-Centre </div> </a> </div> </nav> </header> <div class="md-container" data-md-component="container"> <nav class="md-tabs" aria-label="Tabs" data-md-component="tabs"> <div class="md-grid"> <ul class="md-tabs__list"> <li class="md-tabs__item"> <a href="../index.html" class="md-tabs__link"> Home </a> </li> <li class="md-tabs__item"> <a href="../quickstart.html" class="md-tabs__link"> TalTech Cluster </a> </li> <li class="md-tabs__item"> <a href="../lumi.html" class="md-tabs__link"> LUMI Supercomputer </a> </li> <li class="md-tabs__item"> <a href="../cloud.html" class="md-tabs__link"> TalTech OpenStack Cloud </a> </li> <li class="md-tabs__item"> <a href="../billing.html" class="md-tabs__link"> Billing </a> </li> <li class="md-tabs__item"> <a href="../acknowledgement.html" class="md-tabs__link"> Acknowledgement </a> </li> </ul> </div> </nav> <main class="md-main" data-md-component="main"> <div class="md-grid md-main__inner"> <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation"> <div class="md-sidebar__scrollwrap"> <div class="md-sidebar__inner"> <nav class="md-nav md-nav--integrated md-nav--lifted md-nav--primary" aria-label="Navigation" data-md-level="0"> <label class="md-nav__title" for="__drawer"> <a href="../index.html" title="TalTech HPC User Guides" class="md-logo md-nav__button" aria-label="TalTech HPC User Guides" data-md-component="logo"> <img src="../assets/favicon.ico" alt="logo" fetchpriority="high" decoding="async"> </a> TalTech HPC User Guides </label> <div class="md-nav__source"> <a href="https://github.com/TalTech-HPC-Centre/taltech-hpc-docs" title="Go to repository" class="md-source" data-md-component="source"> <div class="md-icon md-source__icon"> <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 496 512"><!-- Font Awesome Free 6.6.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2024 Fonticons, Inc.--><path d="M165.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6m-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3m44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9M244.8 8C106.1 8 0 113.3 0 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C428.2 457.8 496 362.9 496 252 496 113.3 383.5 8 244.8 8M97.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1m-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7m32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1m-11.4-14.7c-1.6 1-1.6 3.6 0 5.9s4.3 3.3 5.6 2.3c1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2"></path></svg> </div> <div class="md-source__repository"> github.com/TalTech-HPC-Centre </div> </a> </div> <ul class="md-nav__list" data-md-scrollfix=""> <li class="md-nav__item"> <a href="../index.html" class="md-nav__link"> <span class="md-ellipsis"> Home </span> </a> </li> <li class="md-nav__item md-nav__item--nested md-nav__item--pruned"> <a href="../quickstart.html" class="md-nav__link"> <span class="md-ellipsis"> TalTech Cluster </span> <span class="md-icon md-nav__icon"></span> </a> </li> <li class="md-nav__item md-nav__item--nested md-nav__item--pruned"> <a href="../lumi.html" class="md-nav__link"> <span class="md-ellipsis"> LUMI Supercomputer </span> <span class="md-icon md-nav__icon"></span> </a> </li> <li class="md-nav__item md-nav__item--nested md-nav__item--pruned"> <a href="../cloud.html" class="md-nav__link"> <span class="md-ellipsis"> TalTech OpenStack Cloud </span> <span class="md-icon md-nav__icon"></span> </a> </li> <li class="md-nav__item"> <a href="../billing.html" class="md-nav__link"> <span class="md-ellipsis"> Billing </span> </a> </li> <li class="md-nav__item"> <a href="../acknowledgement.html" class="md-nav__link"> <span class="md-ellipsis"> Acknowledgement </span> </a> </li> </ul> </nav> </div> </div> </div> <div class="md-content" data-md-component="content"> <article class="md-typeset md-content__inner"> <a href="https://github.com/TalTech-HPC-Centre/taltech-hpc-docs/raw/main/docs/chemistry/gaussian.md" title="View source of this page" class="md-icon md-content__button"> <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M17 18c.56 0 1 .44 1 1s-.44 1-1 1-1-.44-1-1 .44-1 1-1m0-3c-2.73 0-5.06 1.66-6 4 .94 2.34 3.27 4 6 4s5.06-1.66 6-4c-.94-2.34-3.27-4-6-4m0 6.5a2.5 2.5 0 0 1-2.5-2.5 2.5 2.5 0 0 1 2.5-2.5 2.5 2.5 0 0 1 2.5 2.5 2.5 2.5 0 0 1-2.5 2.5M9.27 20H6V4h7v5h5v4.07c.7.08 1.36.25 2 .49V8l-6-6H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h4.5a8.2 8.2 0 0 1-1.23-2"></path></svg> </a> <h1 id="gaussian">Gaussian<a class="headerlink" href="#gaussian" title="Anchor link to this section for reference">#</a></h1> <p><span style="color:red"><strong><em>Important note:</em></strong> </span> <strong>To run Gaussian, user should be added to the Gaussian group.</strong> Contact to <code>hpcsupport@taltech.ee</code>.</p> <p><br></p> <hr style="border:2px solid #d9d9d9;margin:-24px 0 4px"> <hr style="border:1px solid #d9d9d9;margin:4px 0"> <h2 id="gaussian-short-introduction">Gaussian short introduction<a class="headerlink" href="#gaussian-short-introduction" title="Anchor link to this section for reference">#</a></h2> <hr> <ol> <li> <p>Make <a href="gaussian.slurm">gaussian.slurm</a> batch script:</p> <p>#!/bin/bash #SBATCH --job-name=Job_Name #SBATCH --mem-per-cpu=2GB #SBATCH --nodes=1 #SBATCH --ntasks=1 #SBATCH --cpus-per-task=24 #SBATCH -t 1-00:00:00 #SBATCH --partition=common #SBATCH --no-requeue</p> <div class="highlight"><span class="filename">Text Only</span><pre><span></span><code>module load rocky8/all 
module load gaussian/16.c02

SCRATCH=/state/partition1/$SLURM_JOB_ID
export GAUSS_SCRDIR=$SCRATCH
mkdir -p $SCRATCH

g16 -m=48gb -p=24 &lt; job.com &gt; job.log

#Clean after yourself
rm -rf  $SCRATCH
</code></pre></div> </li> <li> <p>Copy job-input file <a href="job.com">job.com</a>.</p> </li> <li> <p>Submit the job on <strong>base</strong>:</p> <p>sbatch gaussian.slurm</p> <p><strong><em>NB!</em></strong> <em>More cores does not mean faster!!! See <a href="https://docs.hpc.taltech.ee/chemistry/gaussian.html#benchmarks-for-parallel-jobs">benchmarks</a>.</em></p> </li> <li> <p>Check results using <a href="visualization.html">visualization software</a>.</p> </li> </ol> <p><br> <br></p> <hr style="border:2px solid #d9d9d9;margin:-24px 0 4px"> <hr style="border:1px solid #d9d9d9;margin:4px 0"> <h2 id="gaussian-long-version">Gaussian long version<a class="headerlink" href="#gaussian-long-version" title="Anchor link to this section for reference">#</a></h2> <hr> <p><a href="https://gaussian.com/g16main/">Gaussian</a> is a general purpose package for calculation of electronic structures. It can calculate properties of molecules (structures, energies, spectroscopic and thermochemical properties, atomic charges, electron affinities, electrostatic potentials, electron densities etc.) as well as reactions properties (such as reaction pathways, IRC) using different methods (such as Molecular mechanics, Semi-empirical methods, Hartree-Fock, Density functional theory, Møller-Plesset perturbation theory, coupled cluster). More about Gaussian features can be found <a href="https://gaussian.com/g16glance/">here</a>. </p> <h3 id="environment">Environment<a class="headerlink" href="#environment" title="Anchor link to this section for reference">#</a></h3> <p>There are several versions of Gaussian available at HPC: g09 (revision C.01) and g16 (revision B.01, C.01 and C.02). Environment and Gaussian version are set up by the commands:</p> <div class="highlight"><span class="filename">Text Only</span><pre><span></span><code>module load rocky8/all
module load gaussian/16.c02
</code></pre></div> <h3 id="running-gaussian-jobs">Running Gaussian jobs<a class="headerlink" href="#running-gaussian-jobs" title="Anchor link to this section for reference">#</a></h3> <p>Gaussian input files are executed by the commands <code>g09</code> or <code>g16</code> depending on the version of Gaussian used. This command is usually placed in <code>slurm</code> script.</p> <div class="highlight"><span class="filename">Text Only</span><pre><span></span><code>g16 &lt; job.com &gt; job.log
</code></pre></div> <h4 id="single-core-calculations">Single core calculations<a class="headerlink" href="#single-core-calculations" title="Anchor link to this section for reference">#</a></h4> <p>Gaussian by default executes jobs on only a single processor. </p> <p><strong><em>NB!</em></strong> <em>If more processors are defined in <code>slurm</code> script, they will be reserved but not used</em>.</p> <h4 id="parallel-jobs">Parallel jobs<a class="headerlink" href="#parallel-jobs" title="Anchor link to this section for reference">#</a></h4> <p>To run multiple processors/cores job a number of cores should be specified. The number of cores can be defined via the <code>-p</code> flag (e.g. -p=4) in command line of <code>slurm</code> script or by adding the <code>%NprocShared</code> keyword into Gaussian input file (e.g. %NprocShared=4). For more information see <a href="https://gaussian.com/running/">Gaussian manual</a>. The number of processors requested should correspond to the number of processors requested in <code>slurm</code> script.</p> <p><strong><em>NB!</em></strong> <em>More cores does not mean faster!!! See <a href="https://docs.hpc.taltech.ee/chemistry/gaussian.html#benchmarks-for-parallel-jobs">benchmarks</a>.</em></p> <p>Example of <code>slurm</code> script:</p> <div class="highlight"><span class="filename">Text Only</span><pre><span></span><code>#!/bin/bash

#SBATCH --job-name=Job_Name # Job name
#SBATCH --mem=8GB       # Memory
#SBATCH --nodes=1       # Number of nodes 
#SBATCH --ntasks=1      # Number of threads 
#SBATCH --cpus-per-task=4
#SBATCH -t 1-00:00:00       # Time
#SBATCH --partition=common  # Partition
#SBATCH  --no-requeue       # Job will not be restarted by default

module load rocky8/all
module load gaussian/16.c02

SCRATCH=/state/partition1/$SLURM_JOB_ID
export GAUSS_SCRDIR=$SCRATCH
mkdir -p $SCRATCH

g16 &lt; job.com &gt; job.log

rm -rf  $SCRATCH
</code></pre></div> <p>Example of Gaussian input:</p> <div class="highlight"><span class="filename">Text Only</span><pre><span></span><code>%Mem=8GB
%NprocShared=4
%chk=job.chk
#P B3LYP/6-311++G** Opt EmpiricalDispersion=GD3BJ

Job_Name

0,1
C          0.67650        0.42710        0.00022
H          0.75477        1.52537        0.00197
O          1.62208       -0.30498       -0.00037
S         -1.01309       -0.16870        0.00021
H         -1.58104        1.05112       -0.00371
</code></pre></div> <h3 id="memory">Memory<a class="headerlink" href="#memory" title="Anchor link to this section for reference">#</a></h3> <p>The default dynamic memory requested by Gaussian is frequently too small for successful job termination. Herein, if amount of memory requested is insufficient, the job will crash. There is no golden rule for memory requests. Usually, for common calculations (e.g. optimization, frequency etc.) 2 GB per 1 core is sufficient. This can be done by the <code>-m</code> flag in the command line (e.g. -m=48gb) or by adding the <code>%Mem</code> keyword in Gaussian input file (e.g. %Mem=2GB). For more information see <a href="https://gaussian.com/running/">Gaussian manual</a> and <a href="https://docs.hpc.taltech.ee/index.html#hardware-specification">taltech user-guides</a>.</p> <p>However, there are calculations that require more memory (e.g TD-DFT, large SCF calculations, etc.). Data from a <code>slurm-JOBID.stat</code> file can be useful to determine the amount of memory required for a computation. In <code>slurm-JOBID.stat</code> file the efficiency of memory utilization is shown. </p> <p>Bad example:</p> <div class="highlight"><span class="filename">Text Only</span><pre><span></span><code>Memory Utilized: 3.08 GB 
Memory Efficiency: 11.83% of 26.00 GB
</code></pre></div> <p>Good example:</p> <div class="highlight"><span class="filename">Text Only</span><pre><span></span><code>Memory Utilized: 63.12 GB 
Memory Efficiency: 98.62% of 64.00 GB
</code></pre></div> <h3 id="time">Time<a class="headerlink" href="#time" title="Anchor link to this section for reference">#</a></h3> <p>Time limits depend on <a href="https://docs.hpc.taltech.ee/index.html#hardware-specification">time partition</a> used. If calculation time exceeds the time limit requested in the <code>slurm</code> script, the job will be killed, and in the end of <code>slurm-JOBID.out</code> will be written "error: *** JOB 317255 ON green23 CANCELLED AT 2023-08-11T22:28:01 DUE TO TIME LIMIT *** "</p> <p>Therefore, it is recommended to request more time than is usually needed for calculation and create checkpoint files (by <code>%chk=job.chk</code> line in input file) that allows to restart job.</p> <h3 id="using-gpus">Using GPUs<a class="headerlink" href="#using-gpus" title="Anchor link to this section for reference">#</a></h3> <p>GPUs <strong>are effective</strong> for large molecules, their energies, gradients and frequencies calculations. GPUs <strong>are not effective</strong> for small jobs, as well as for MP2 or CCSD calculations. </p> <p>GPU jobs can be run only on <strong>amp</strong> or <strong>amp2</strong>. To access <strong>amp</strong> user has to have ssh-keys copied to the <strong>base</strong> (<a href="../ssh.html">how to do that</a>).</p> <p><strong>amp</strong> can be accessed by command:</p> <div class="highlight"><span class="filename">Text Only</span><pre><span></span><code>ssh -J uni-ID@base.hpc.taltech.ee uni-ID@amp
</code></pre></div> <p>Each GPU must be controlled by a specific CPU, wherein, CPUs used as GPU controllers do not participate as compute nodes during the calculations.</p> <p>The GPUs and CPUS used for calculations are specified with the <code>%GPUCPU</code> command, where gpu- and cpu-lists are a comma-separated lists, possibly including numerical ranges (e.g., 0-4,6). The corresponding items in the two lists are the GPU and its controlling CPU.</p> <div class="highlight"><span class="filename">Text Only</span><pre><span></span><code>%cpu=0-9
%gpucpu=0-1=0-1
</code></pre></div> <p><strong><em>NB!</em></strong> <em>The controlling CPUs are included in <code>%CPU</code> command.</em> <br> <strong><em>NB!</em></strong> <em>The GPU and CPU count starts from zero.</em></p> <p>Example of <a href="gaussian-gpu.slurm">gaussian-gpu.slurm</a> script for <strong>amp</strong>:</p> <div class="highlight"><span class="filename">Text Only</span><pre><span></span><code>#!/bin/bash
#SBATCH --job-name=Job_Name
#SBATCH -t 1:00:00
#SBATCH  --no-requeue
#SBATCH --partition=gpu     # Partition
#SBATCH --gres=gpu:A100:2   # 2 GPU are reserved
#SBATCH --nodes=1
#SBATCH --ntasks=1
#SBATCH --cpus-per-task=10  # 10 CPU are reserved
#SBATCH --mem=160GB     # Memory

module use /gpfs/mariana/modules/system
module load amp/all
module load Gaussian/16.c02

SCRATCH=/state/partition1/$SLURM_JOB_ID
export GAUSS_SCRDIR=$SCRATCH
mkdir -p $SCRATCH

g16 job.com &gt; job.log

#Clean after yourself
rm -rf  $SCRATCH
</code></pre></div> <p>Example of Gaussian input <a href="job-gpu.com">job-gpu.com</a> (bad example, since molecule is small):</p> <div class="highlight"><span class="filename">Text Only</span><pre><span></span><code>%mem=160GB
%cpu=0-9
%gpucpu=0-1=0-1
# wb97xd/cc-pVDZ opt

GPU test

0 1
N                  0.15134980    0.09540020    1.45819090
C                  0.75130720   -1.21343470    1.83361500
H                 -0.39763650    0.48328420    2.23924210
H                  0.89227330    0.78663430    1.26643050
C                  2.08354180   -1.05427080    2.58684570
H                  2.46028270   -2.07052410    2.83958100
H                  1.89047670   -0.54642730    3.56027240
H                  0.94017970   -1.74157910    0.87502690
C                 -0.27659390   -2.02386680    2.62322330
H                 -1.22744720   -2.09807790    2.06259160
H                  0.09671630   -3.04868580    2.81503150
H                 -0.48448270   -1.55043170    3.60777900
C                  3.18448030   -0.29819020    1.82025510
C                  4.47118690   -0.16399430    2.65811660
C                  3.50345720   -0.94054930    0.45675520
H                  2.82725210    0.74302520    1.61940860
C                  5.57163930    0.60375030    1.90697440
H                  4.83763400   -1.18683360    2.90651280
H                  4.24528280    0.32880900    3.62913610
C                  4.59840130   -0.17643230   -0.29951390
H                  3.82853470   -1.99290760    0.62773340
H                  2.59267050   -0.99453480   -0.16920790
C                  5.87589210   -0.03780040    0.54257470
H                  6.49233690    0.65984540    2.52562860
H                  5.23630520    1.65412070    1.74873850
H                  4.81114970   -0.67947290   -1.26682010
H                  4.21177720    0.83532620   -0.55856640
H                  6.64325110    0.55322730   -0.00130230
H                  6.31606730   -1.04822960    0.70571860
</code></pre></div> <h4 id="allocation-of-memory">Allocation of memory<a class="headerlink" href="#allocation-of-memory" title="Anchor link to this section for reference">#</a></h4> <p>Allocating sufficient amounts of memory for GPU jobs is even more important when for CPU jobs. GPUs can have up to 40GB (<strong>amp1</strong>) and 80GB (<strong>amp2</strong>) of memory, wherein, must be at least an equal amount of memory given to the GPU and each control CPU thread from available 1 TB of RAM.</p> <p>Gaussian gives equal shares of memory to each thread, this means that the total memory allocated should be the number of threads times the memory required. </p> <h3 id="restarting-a-failedinterrupted-calculation"><em>Restarting a failed/interrupted calculation</em><a class="headerlink" href="#restarting-a-failedinterrupted-calculation" title="Anchor link to this section for reference">#</a></h3> <p>Killed or failed jobs can be restarted, but for this checkpoint file should be generated via a <code>%Chk</code> command within the Gaussian input file. For more information see <a href="https://gaussian.com/faq2/">Gaussian FAQ</a>, <a href="https://gaussian.com/restart/">Gaussian restart</a> and <a href="http://www.ccl.net/cca/documents/dyoung/topics-orig/checkpoint.html">Using Gaussian Checkpoint Files</a>.</p> <p><strong><em>NB!</em></strong> <em>Checkpoint files are very heavy and are readable only on the machine on which they were generated. After successful completion of the calculation, it is recommended to delete these files.</em></p> <h4 id="how-to-cite">How to cite:<a class="headerlink" href="#how-to-cite" title="Anchor link to this section for reference">#</a></h4> <ul> <li><em>Gaussian 16 - <a href="https://gaussian.com/citation/">https://gaussian.com/citation/</a></em></li> <li><em>Gaussian 09 - Gaussian 09, Revision C.01, Frisch, M.J.; Trucks, G.W.; Schlegel, H.B.; Scuseria, G.E.; Robb, M.A.; Cheeseman, J.R.; Scalmani, G.; Barone, V.; Mennucci, B.; Petersson, G.A.; Nakatsuji, H.; Caricato, M.; Li, X.; Hratchian, H.P.; Izmaylov, A.F.; Bloino, J.; Zheng, G.; Sonnenberg, J.L.; Hada, M.; Ehara, M.; Toyota, K.; Fukuda, R.; Hasegawa, J.; Ishida, M.; Nakajima, T.; Honda, Y.; Kitao, O.; Nakai, H.; Vreven, T.; Montgomery, J.A., Jr.; Peralta, J.E.; Ogliaro, F.; Bearpark, M.; Heyd, J.J.; Brothers, E.; Kudin, K.N.; Staroverov, V.N.; Kobayashi, R.; Normand, J.; Raghavachari, K.; Rendell, A.; Burant, J.C.; Iyengar, S.S.; Tomasi, J.; Cossi, M.; Rega, N.; Millam, N.J.; Klene, M.; Knox, J.E.; Cross, J.B.; Bakken, V.; Adamo, C.; Jaramillo, J.; Gomperts, R.; Stratmann, R.E.; Yazyev, O.; Austin, A. J.; Cammi, R.; Pomelli, C.; Ochterski, J. W.; Martin, R.L.; Morokuma, K.; Zakrzewski, V.G.; Voth, G.A.; Salvador, P.; Dannenberg, J.J.; Dapprich, S.; Daniels, A.D.; Farkas, Ö.; Foresman, J.B.; Ortiz, J.V.; Cioslowski, J.; Fox, D.J. Gaussian, Inc., Wallingford CT, 2009.</em> <br></li> </ul> <h3 id="benchmarks-for-parallel-jobs">Benchmarks for parallel jobs<a class="headerlink" href="#benchmarks-for-parallel-jobs" title="Anchor link to this section for reference">#</a></h3> <p>Gaussian example benchmarks performed with Gaussian 16 C01.<br> The job had 37 atoms.</p> <div style="width:45%; height:!35%; margin-left: auto; margin-right: auto;"> ![Molecule](Porphyrin-1.png) </div> <p><a class="glightbox" href="Gaussian16_opt.png" data-type="image" data-width="auto" data-height="auto" data-desc-position="bottom"><img alt="20 Gaussian cores vs SLURM threads" src="Gaussian16_opt.webp" loading="lazy" decoding="async" width="2067" height="1265" srcset="Gaussian16_opt.webp 2067w, Gaussian16_opt@867w.webp 867w" sizes="100vw"></a></p> <p><a class="glightbox" href="Gaussian_an_freq.png" data-type="image" data-width="auto" data-height="auto" data-desc-position="bottom"><img alt="40 Gaussian cores vs SLURM threads" src="Gaussian_an_freq.webp" loading="lazy" decoding="async" width="2071" height="1265" srcset="Gaussian_an_freq.webp 2071w, Gaussian_an_freq@871w.webp 871w" sizes="100vw"></a></p> <p><a class="glightbox" href="Gaussian_num_freq.png" data-type="image" data-width="auto" data-height="auto" data-desc-position="bottom"><img alt="40 Gaussian cores vs SLURM threads" src="Gaussian_num_freq.webp" loading="lazy" decoding="async" width="2071" height="1274" srcset="Gaussian_num_freq.webp 2071w, Gaussian_num_freq@1171w.webp 1171w, Gaussian_num_freq@871w.webp 871w" sizes="100vw"></a></p> <p><br></p> </article> </div> <script>var tabs=__md_get("__tabs");if(Array.isArray(tabs))e:for(var set of document.querySelectorAll(".tabbed-set")){var labels=set.querySelector(".tabbed-labels");for(var tab of tabs)for(var label of labels.getElementsByTagName("label"))if(label.innerText.trim()===tab){var input=document.getElementById(label.htmlFor);input.checked=!0;continue e}}</script> <script>var target=document.getElementById(location.hash.slice(1));target&&target.name&&(target.checked=target.name.startsWith("__tabbed_"))</script> </div> <button type="button" class="md-icon md-top" data-md-component="top" hidden=""> <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M13 20h-2V8l-5.5 5.5-1.42-1.42L12 4.16l7.92 7.92-1.42 1.42L13 8z"></path></svg> Back to top </button> </main> <footer class="md-footer"> <div class="md-typeset md-footer-meta"> <div class="md-grid md-footer-meta__inner"> <div class="md-copyright"> Made with <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener"> Material for MkDocs </a> </div> <div class="md-social"> <a href="https://hpc.taltech.ee/" target="_blank" rel="noopener" title="hpc.taltech.ee" class="md-social__link"> <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 576 512"><!-- Font Awesome Free 6.6.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2024 Fonticons, Inc.--><path d="M575.8 255.5c0 18-15 32.1-32 32.1h-32l.7 160.2c0 2.7-.2 5.4-.5 8.1v16.2c0 22.1-17.9 40-40 40h-16c-1.1 0-2.2 0-3.3-.1-1.4.1-2.8.1-4.2.1L416 512h-24c-22.1 0-40-17.9-40-40v-88c0-17.7-14.3-32-32-32h-64c-17.7 0-32 14.3-32 32v88c0 22.1-17.9 40-40 40h-55.9c-1.5 0-3-.1-4.5-.2-1.2.1-2.4.2-3.6.2h-16c-22.1 0-40-17.9-40-40V360c0-.9 0-1.9.1-2.8v-69.7h-32c-18 0-32-14-32-32.1 0-9 3-17 10-24L266.4 8c7-7 15-8 22-8s15 2 21 7l255.4 224.5c8 7 12 15 11 24"></path></svg> </a> <a href="https://github.com/TalTech-HPC-Centre" target="_blank" rel="noopener" title="github.com" class="md-social__link"> <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 496 512"><!-- Font Awesome Free 6.6.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2024 Fonticons, Inc.--><path d="M165.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6m-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3m44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9M244.8 8C106.1 8 0 113.3 0 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C428.2 457.8 496 362.9 496 252 496 113.3 383.5 8 244.8 8M97.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1m-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7m32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1m-11.4-14.7c-1.6 1-1.6 3.6 0 5.9s4.3 3.3 5.6 2.3c1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2"></path></svg> </a> <a href="mailto:hpcsupport@taltech.ee" target="_blank" rel="noopener" title="" class="md-social__link"> <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><!-- Font Awesome Free 6.6.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2024 Fonticons, Inc.--><path d="M48 64C21.5 64 0 85.5 0 112c0 15.1 7.1 29.3 19.2 38.4l217.6 163.2c11.4 8.5 27 8.5 38.4 0l217.6-163.2c12.1-9.1 19.2-23.3 19.2-38.4 0-26.5-21.5-48-48-48zM0 176v208c0 35.3 28.7 64 64 64h384c35.3 0 64-28.7 64-64V176L294.4 339.2a63.9 63.9 0 0 1-76.8 0z"></path></svg> </a> <a href="https://taltech.atlassian.net/servicedesk/customer/portal/18/create/228" target="_blank" rel="noopener" title="taltech.atlassian.net" class="md-social__link"> <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 640 512"><!-- Font Awesome Free 6.6.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2024 Fonticons, Inc.--><path d="M208 352c114.9 0 208-78.8 208-176S322.9 0 208 0 0 78.8 0 176c0 38.6 14.7 74.3 39.6 103.4-3.5 9.4-8.7 17.7-14.2 24.7-4.8 6.2-9.7 11-13.3 14.3-1.8 1.6-3.3 2.9-4.3 3.7-.5.4-.9.7-1.1.8l-.2.2C1 327.2-1.4 334.4.8 340.9S9.1 352 16 352c21.8 0 43.8-5.6 62.1-12.5 9.2-3.5 17.8-7.4 25.2-11.4C134.1 343.3 169.8 352 208 352m240-176c0 112.3-99.1 196.9-216.5 207 24.3 74.4 104.9 129 200.5 129 38.2 0 73.9-8.7 104.7-23.9 7.5 4 16 7.9 25.2 11.4 18.3 6.9 40.3 12.5 62.1 12.5 6.9 0 13.1-4.5 15.2-11.1s-.2-13.8-5.8-17.9l-.2-.2c-.2-.2-.6-.4-1.1-.8-1-.8-2.5-2-4.3-3.7-3.6-3.3-8.5-8.1-13.3-14.3-5.5-7-10.7-15.4-14.2-24.7 24.9-29 39.6-64.7 39.6-103.4 0-92.8-84.9-168.9-192.6-175.5.4 5.1.6 10.3.6 15.5z"></path></svg> </a> </div> </div> </div> </footer> </div> <div class="md-dialog" data-md-component="dialog"> <div class="md-typeset md-dialog__inner"></div> </div> <script id="__config" type="application/json">{"base": "..", "features": ["navigation.tabs", "navigation.indexes", "navigation.top", "content.tabs.link", "search.share", "search.suggest", "content.code.annotate", "content.code.copy", "content.action.view", "navigation.indexes", "navigation.prune", "toc.follow", "toc.integrate"], "search": "../assets/javascripts/workers/search.6ce7567c.min.js", "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version": "Select version"}}</script> <script src="../assets/javascripts/bundle.d6f25eb3.min.js"></script> <script src="https://unpkg.com/tablesort@5.3.0/dist/tablesort.min.js"></script> <script src="../javascripts/tablesort.js"></script> <script id="init-glightbox">const lightbox=GLightbox({touchNavigation:!0,loop:!1,zoomable:!0,draggable:!0,openEffect:"zoom",closeEffect:"zoom",slideEffect:"slide"});document$.subscribe(()=>{lightbox.reload()});
</script> </body></html>